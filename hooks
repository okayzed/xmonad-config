#!/usr/bin/bash

function run_if_not {
  pgrep $1 || $*
}

if [[ $1 == "startup" ]]; then
  # Apps
  run_if_not workrave &
  killall synapse
  synapse -s &
  run_if_not irssi_notifier

  # network manager
  killall nm-applet
  run_if_not nm-applet &

  # lock screen
  gnome-screensaver &

  # docks
  run_if_not xmobar &
  run_if_not nautilus &

  killall trayer

  export SSH_ASKPASS="/usr/bin/ssh-askpass"
  ssh-add &


  # Add --monitor 1 or 0 to change where it appears
  run_if_not trayer --edge top --align right --SetDockType true --SetPartialStrut true  --width 11 --transparent true --tint 0x000000 --height 24 &

  gnome-settings-daemon &

fi
