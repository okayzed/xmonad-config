#!/usr/bin/bash

function run_if_not {
  pgrep -f $1 || $*
}

if [[ $1 == "startup" ]]; then
  run_if_not xfce4-session &
  /usr/bin/setxkbmap -option 'ctrl:nocaps' &
  xmodmap ~/.Xmodmap &

  run_if_not arbtt-capture -r 10

  run_if_not workrave &
  killall kupfer
  kupfer --no-splash &

  # network manager
  # docks

  run_if_not autolux --crop "10x500+400+0" --sleep-interval 513 &

#  killall xcompmgr
#  run if not xcompmgr -a &

  export SSH_ASKPASS="/usr/bin/ssh-askpass"
  ssh-add &


  # Add --monitor 1 or 0 to change where it appears
#  killall trayer
#  run_if_not trayer --edge top --align right --SetDockType true --SetPartialStrut true  --width 11 --transparent true --tint 0x000000 --height 32 &

  killall ginn
  run_if_not ginn /etc/ginn/wishes.xml &
#  run_if_not unclutter -idle 0.1 &

  /usr/bin/setxkbmap -option 'ctrl:nocaps' &
  xmodmap ~/.Xmodmap &
fi
